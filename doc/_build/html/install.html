

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; EVA HMI Block UI  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dashboard page" href="dashboard.html" />
    <link rel="prev" title="EVA HMI Block UI" href="index.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> EVA HMI Block UI
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">Dashboard page</a></li>
<li class="toctree-l1"><a class="reference internal" href="simple.html">Simple page</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors page</a></li>
<li class="toctree-l1"><a class="reference internal" href="navigation.html">Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="overriding.html">Overriding app methods and variables</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EVA HMI Block UI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation</h1>
<p>Go to EVA ICS UI folder (usually <em>/opt/eva/ui</em>) create <em>apps</em> folder if
it doesn’t exist yet and clone app repository to it.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /opt/eva/ui
mkdir -p apps
<span class="nb">cd</span> apps
git clone https://github.com/alttch/eva-hmi-block_ui.git
</pre></div>
</div>
<p>If you don’t have <a class="reference external" href="https://github.com/alttch/eva-js-framework/">EVA JS Framework</a> installed, download it and
put e.g. to <em>lib</em> folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /opt/eva/ui
mkdir -p lib
curl https://raw.githubusercontent.com/alttch/eva-js-framework/master/dist/eva.min.js -o lib/eva.min.js
</pre></div>
</div>
<p>Then create your first page in <em>/opt/eva/ui/</em>, call it <em>index.j2</em>. J2 files
are regular HTML files however EVA ICS processes them as <a class="reference external" href="http://jinja.pocoo.org/">Jinja2
templates</a>. If you don’t plan to use Jinja tags,
you can name your file <em>index.html</em> as well:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Dashboard<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1,</span>
<span class="s">        user-scalable=no&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span>
        <span class="na">src</span><span class="o">=</span><span class="s">&quot;.evahi/config.yml?as=js&amp;var=evaHI&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span>
        <span class="na">src</span><span class="o">=</span><span class="s">&quot;config/index.yml?as=js&amp;var=eva_hmi_config&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span>
        <span class="na">src</span><span class="o">=</span><span class="s">&quot;lib/eva.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span>
        <span class="na">src</span><span class="o">=</span><span class="s">&quot;apps/eva-hmi-block_ui/index.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span>
        <span class="na">href</span><span class="o">=</span><span class="s">&quot;apps/eva-hmi-block_ui/themes/default/style.css&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span>
        <span class="na">href</span><span class="o">=</span><span class="s">&quot;apps/eva-hmi-block_ui/themes/default/icons.css&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$eva</span><span class="p">.</span><span class="nx">hmi</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Let’s explain it line-by-line:</p>
<p>This line adds top-bar and menu <a class="reference internal" href="navigation.html"><span class="doc">navigation</span></a>
configuration, which is <a class="reference external" href="https://github.com/alttch/evaHI">evaHI</a>
compatible YAML or JSON file. As EVA ICS SFA allows to transform YAML files
on the flow to JSON or JavaScript variable/function, we’ll use YAML almost
everywhere.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span>
    <span class="na">src</span><span class="o">=</span><span class="s">&quot;.evahi/config.yml?as=js&amp;var=evaHI&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Next we need to connect main page configuration. It should be placed to
JavaScript variable called <em>eva_hmi_config</em>.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span>
    <span class="na">src</span><span class="o">=</span><span class="s">&quot;config/index.yml?as=js&amp;var=eva_hmi_config&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>By the way, you can split your configuration in several files, e.g. create
separate configuration files for buttons and cameras and load them to
proper JavaScript configuration variables for all pages you have.</p>
<p>Just note: if you’ve already loaded configuration for e.g. buttons, but
<em>buttons</em> with the same IDs are present in the main configuration, they will be
overriden.</p>
<p>Valid configuration variables are:</p>
<ul class="simple">
<li><strong>eva_hmi_config</strong></li>
<li><strong>eva_hmi_config_class</strong></li>
<li><strong>eva_hmi_config_buttons</strong></li>
<li><strong>eva_hmi_config_data</strong></li>
<li><strong>eva_hmi_config_control_blocks</strong></li>
<li><strong>eva_hmi_config_data_blocks</strong></li>
<li><strong>eva_hmi_config_cameras</strong></li>
<li><strong>eva_hmi_config_charts</strong></li>
<li><strong>eva_hmi_config_layout</strong></li>
<li><strong>eva_hmi_config_layout_compact</strong></li>
<li><strong>eva_hmi_config_url</strong></li>
<li><strong>eva_hmi_config_main_page</strong></li>
<li><strong>eva_hmi_config_motd</strong></li>
<li><strong>eva_hmi_config_chart_options</strong></li>
</ul>
<p>Their names match proper sections in the configuration files.</p>
<p>Depending on a page class, create configuration file for <a class="reference internal" href="dashboard.html"><span class="doc">dashboard</span></a>, <a class="reference internal" href="simple.html"><span class="doc">simple</span></a> or <a class="reference internal" href="sensors.html"><span class="doc">sensors</span></a> UI page.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Primary UI page (<em>index.html</em> or <em>index.j2</em>) should have either
<em>dashboard</em> or <em>simple</em> class, as <em>sensors</em> page class doesn’t have
login form and if user is not authorized, redirect to the page
specified in <em>eva_hmi_config_main_page</em> variable or to <em>/ui/</em> if
variable is not set.</p>
</div>
<p>Connect EVA JS Framework:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;lib/eva.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Connect HMI application:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span>
    <span class="na">src</span><span class="o">=</span><span class="s">&quot;apps/eva-hmi-block_ui/index.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>After loading, HMI application is automatically injected into EVA JS
Framework as <em>$eva.hmi</em>.</p>
<p>Finally, connect styles</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span>
        <span class="na">href</span><span class="o">=</span><span class="s">&quot;apps/eva-hmi-block_ui/themes/default/style.css&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span>
        <span class="na">href</span><span class="o">=</span><span class="s">&quot;apps/eva-hmi-block_ui/themes/default/icons.css&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>and start interface app:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$eva</span><span class="p">.</span><span class="nx">hmi</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Before start, some app methods can be <a class="reference internal" href="overriding.html"><span class="doc">overriden</span></a>.</p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, AlterTech.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>